body {
    background-color: var(--primary);
    height: 100dvh;
    position: relative;
    &:not(:has(#start-page.hidden)) > *:not(#start-page) {display: none}
    &.show-end-screen #app {display: none}
    &.show-end-screen #end-screen {display: flex}
}

/* ========== START PAGE ========== */

#start-page {
    height: 100%;
    display: flex;
    flex-direction: column;
    align-items: center;
    justify-content: center;
    gap: 1rem;
    padding: 5rem 1rem;
    position: relative;
    &.hidden {display: none}

    .jeopardy-logo { width: max(300px, 50vw) }

    .topic-name {
        font-size: clamp(2.5rem, 10vw, 6rem);
        color: var(--accent);
        text-transform: uppercase;
    }

}

/* Player Name Container */

.player-name-container {
    margin-block: auto;
    width: clamp(19rem, 50%, 40rem);
    display: flex;
    flex-direction: column;
    gap: 1rem;
    background-color: var(--primary-light);
    border-radius: 5rem;
    padding: 1.5rem;

    h3 {
        font-size: clamp(1.5rem, 3vw, 2rem);
    }

    #name-list {
        min-height: 6rem;
        display: flex;
        flex-wrap: wrap;
        gap: 1rem;
        border-radius: 3rem;
        padding: 1rem;
        box-shadow:
            inset 0 1px 2px hsl(0 0 0 / .7),
            inset 0 -1px 2px hsl(0 0 100 / .2);
    }

    #name-list li {
        list-style: none;
        font-family: var(--accent-font);
        font-weight: 500;
        font-size: clamp(1rem, 3vw, 2.5rem);
        color: var(--accent);
        background-color: var(--primary-light);
        border-radius: 3rem;
        padding: .5rem 1rem;
    }

    #add-player-btn {
        align-self: flex-end;
        display: flex;
        font-size: 2.5rem;
        cursor: pointer;
        transition: .2s ease;
        &:hover { scale: 1.1 }
        &:active { scale: 1 }
    }
}

/* Form Modal */

#form-modal {
    position: fixed;
    inset: 0;
    margin: auto;
    background-color: var(--primary-dark);
    border-radius: 3rem;
    padding: 1.5rem 2rem 1rem;
    border: 1px solid hsl(0 0 100 /.1);
    backdrop-filter: blur(1rem);
    opacity: 0;
    translate: 0 25vh;
    display: none;
    transition-property: display opacity translate;

    &, &::backdrop {
        transition-duration: .4s;
        transition-timing-function: ease;
        transition-behavior: allow-discrete;
    }
    
    &[open] {
        display: block;
        translate: 0 0vh;
        opacity: 1;
    }

    &::backdrop {
        opacity: 0;
        backdrop-filter: blur(.5rem) brightness(0.7);
        transition-property: opacity display overlay;
    }

    &[open]::backdrop { opacity: 1 }

    @starting-style {
        &[open] {opacity: 0; translate: 0 -25vh}
        &[open]::backdrop {opacity: 0}
    }
}

/* Players Form */

#players-form {
    & > *:is(:nth-child(2), :nth-child(3)) {
        margin-bottom: 1.5rem;
    }

    label {
        display: block;
        color: var(--accent);
        font-weight: 600;
        font-size: 1.5rem;
    }

    input {
        background-color: transparent;
        border: 2px solid white;
        font-size: 2rem;
        padding: 1rem;
        border-radius: 2rem;
        transition: background-color 0.2s ease;
        &:focus {outline: none; background-color: rgb(255 255 255 / .1);}
    }

    #close-btn {
        display: block;
        margin-left: auto;
        background-color: transparent;
        border: none;
        padding: 0;
        cursor: pointer;
        transition: .2s ease;
        path { fill: hsl(0 0 100 / .7) }
        &:hover path { fill: hsl(0 0 100) }
    }

    #submit-btn {
        display: block;
        margin-left: auto;
        color: var(--accent);
        background-color: transparent;
        border: none;
        font-size: 1.8rem;
        font-weight: 600;
        cursor: pointer;
        &:hover {animation: bounce 0.3s ease forwards}
    }
}

@keyframes bounce {
    0% {translate: 0px}
    20% {translate: -2px}
    80% {translate: 7px}
    100% {translate: 5px}
}

/* ========== MAIN GAME PAGE ========== */

#app {
    position: relative;
    padding: 1rem;
    min-height: 100%;
    display: flex;
    flex-wrap: wrap;
    gap:  1.5rem;

    > * {
        padding: 1.5rem;
        background-color: var(--primary-dark);
        border-radius: 3rem;
        padding: 2rem;
    }

    #header {
        height: fit-content;
        flex: 1 1 100%;
        display: flex;
        justify-content: space-between;
        align-items: center;

        h2 {
            color: var(--accent);
            font-weight: 800;
            font-size: clamp(2rem, 7vw, 4rem);
            text-transform: uppercase;
        }
    }
}

/* Game Board */

#game-board {
    flex: 1 1 70%;
    display: flex;
    gap: 1rem;
}

.category-column {
    flex: 1;
    display: flex;
    flex-direction: column;
    justify-content: space-between;
    gap: .5rem;
    > * { align-content: center }

    .category-header {
        background-color: hsl(0 0 0 / .15);
        background-color: var(--primary-dark);
        padding-inline: 1rem;
        margin-bottom: 1rem;
        font-size: clamp(2rem, 3vw, 2.3rem);
        font-weight: 500;
        line-height: 1.2;
        text-align: center;
        flex: 1 1 calc(1/6 * 100%);
    }

    .prblm-btn {
        background-color: var(--primary-light);
        flex: 1;
        font-size: clamp(2rem, 5vw, 3.5rem);
        text-align: center;
        color: var(--accent);
        cursor: pointer;
        transition: all 0.2s ease;

        &:hover:not(:active) {
            background-color: var(--primary-light-2);
            translate: 0 -4px;
        }

        &.clicked { visibility: hidden }
    }
}

/* Player Points Aside */

aside {
    flex: 1 1 15%;
    display: flex;
    flex-direction: column;
    justify-content: space-between;

    h2 {
        text-align: center;
        font-size: clamp(1rem, 3vw, 2rem);
    }
}

#players-container {
    display: flex;
    flex-direction: column;
    align-items: center;
    justify-content: space-evenly;
    flex: 1;
}

.player-container {
    background-color: var(--primary-light);
    padding: .5rem 1rem;
    position: relative;
    width: 100%;
    display: flex;
    align-items: center;
    justify-content: flex-end;
    gap: 3rem;
    &:has(.highest-score) { order: -1 }

    .player-name-wrapper {
        font-weight: 500;
        font-size: 1.7rem;
        margin-right: auto;
    }

    .player-score {
        text-align: end;
        color: var(--accent);
        font-weight: 500;
        font-size: 3rem;
        cursor: pointer;
        margin-right: 2rem;
        min-width: 4ch;
        transform-origin: 100% 50%;
        transition: all 0.2s ease;
        &.highest-score { color: hsl(120 61 50) }
        &:hover { scale: 1.1 }
        &.disabled { pointer-events: none }
    }
    

    .more-btn {
        position: absolute;
        display: flex;
        flex-direction: column;
        gap: .2rem;
        cursor: pointer;
        input { opacity: 0; width: 0; height: 0; visibility: hidden }

        span {
            width: .25rem;
            aspect-ratio: 1;
            background-color: hsl(0 0 100 / .5);
            border-radius: 50%;
            transition: background-color .15s ease;
            :hover > & {background-color: hsl(0 0 100)}
        }
    }

    .more-menu {
        position: absolute;
        inset: calc(100% + .5rem) 0 auto auto;
        background-color: hsl(240 43 51);
        z-index: 1;
        padding: .5rem;
        list-style: none;
        font-family: var(--san-serif);
        .more-btn:not(:has(input:checked)) + & { display: none }
        li { cursor: pointer }
    }
    
    &:has(.final-answer-status) > *:not(.final-answer-status) {filter: blur(5px)}

    .final-answer-status {
        position: absolute;
        inset: -.3rem -.5rem;
        background-color: hsl(0 0 0 / .4);
        backdrop-filter: blur(10px);
        border-radius: 1rem;
        border: 2px solid hsl(0 0 100 / .3);
        display: flex;
        align-items: center;
        justify-content: center;
        gap: 1rem;
        transition: all 0.2s ease;

        > * {
            font-size: clamp(1.5rem, 3vw, 2.5rem);
            font-weight: 600;
            cursor: pointer;
            border-radius: 50%;
            border: 2px solid var(--color);
            background-color: var(--color);
            transition: all 0.2s ease;
            &:is(.answer-right) {--color: #32cd32}
            &:is(.answer-wrong) {--color: #ff0000}
        }

        > *:hover {
            transform: translateY(-5px);
            box-shadow: 0 5px 0 hsl(from var(--color) h s calc(l - 20));
        }
        > *:active {transform: none; box-shadow: none}

    }
}

/* Question/Answer Pop Up */

#question-answer {
    position: absolute;
    inset: 0;
    background-color: var(--primary);
    display: none;
    padding: 3rem;
    flex-direction: column;
    align-items: center;
    gap: 5rem;
    opacity: 0;
    transition: display .3s ease, opacity .3s ease;
    transition-behavior: allow-discrete;

    #question-header {
        display: flex;
        align-items: center;
        justify-content: space-between;
        gap: 2rem;
        width: 100%;

        .line {
            width: 4px;
            height: 100%;
            background-color: var(--accent);
            border-radius: 100vmax;
        }

        h2 {
            color: var(--accent);
            font-size: clamp(2rem, 4vw, 4rem);
            text-align: center;
        }
    }

    #question-wrapper {
        display: flex;
        .show-answer > & { display: none }
    }

    #answer-wrapper {
        :not(.show-answer) > & { display: none }
        .show-answer > & { animation: fade .5s ease forwards }
        img {
            display: block;
            margin: 1rem auto 0;
            height: 15rem;
            border-radius: 1rem;
        }
    }

    &.show-question {
        display: flex;
        opacity: 1;
        @starting-style {opacity: 0}
    }
}

@keyframes fade {
    from {opacity: 0;}
    to {opacity: 1;}
}

#answer-wrapper, #question-wrapper {
    flex: 1;
    flex-direction: column;
    align-items: center;
    justify-content: center;
    width: clamp(200px, 70%, 60rem);
    max-height: 35rem;
    position: relative;
    display: flex;
    flex-direction: column;

    p {
        flex: 1;
        align-content: center;
        font-size: 3rem;
        text-align: center;
        font-family: var(--san-serif);
        text-wrap: balance;
        line-height: 1.5;

    }

    button {
        align-self: flex-end;
        display: flex;
    }
}

/* Timer */

#timer-wrapper {
    flex: 1 1 30%;
    height: 2rem;
    border: 3px solid var(--accent);
    border-radius: 100vmax;
    position: relative;

    #timer-bar {
        position: absolute;
        inset-block: 0;
        background-color: var(--accent);
        border-radius: inherit;
        width: 100%;
        transition: all 0.5s linear;
    }
}

#time-msg {
    display: none;
    position: absolute;
    bottom: 0;
    margin-bottom: 5rem;
    translate: 0 100%;
    opacity: 0;
    padding: 1rem 2rem;
    transition-property: display translate opacity;
    transition-duration: .2s;
    transition-timing-function: ease;
    transition-behavior: allow-discrete;

    h2 {
        color: red;
        font-size: 3rem;
    }

    &.show {
        display: block;
        translate: 0 0;
        opacity: 1;
        @starting-style {
            translate: 0 100%;
            opacity: 0;
        }
    }
}

/* ========== END PAGE ========== */

#end-screen {
    flex-direction: column;
    gap: 3rem;
    justify-content: center;
    align-items: center;
    height: 100%;
    display: none;
    padding: 2rem;

    h2 {
        text-align: center;
        font-size: clamp(2rem, 5vw, 4rem);
        text-wrap: balance;
    }
}

#winner-container {
    display: flex;
    flex-wrap: wrap;
    gap: 1rem;
    align-items: center;
    justify-content: center;
    
    & > * {color: var(--accent)}
    p {font-size: clamp(3rem, 10vw, 6rem)}
    
    .winner-name {
        border-radius: 5rem;
        background-color: var(--primary-light);
        font-size: clamp(4rem, 10vw, 8rem);
        padding: 1rem 2rem;
    }

    img {
        display: block;
        width: max(300px, 50%);
        margin-inline: auto;
        box-shadow: 2px 2px 5px rgb(0 0 0 / .2);
    }

}